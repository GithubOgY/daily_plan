# 納品指示書作成設定ファイル

このファイルは、納品指示書を作成する際の初期設定を定義しています。

## 設定内容

### Google Maps MCP設定
- **使用**: 有効
- **移動時間計算**: Google Maps MCPを使用して自動計算
- **デフォルト移動手段**: 車（driving）
- **デフォルト出発時刻**: 15:00

### 使用するGoogle Maps API
以下のAPIを利用します：

1. **Places API (New)**
   - 場所の検索に使用
   - 納品先の詳細情報取得など

2. **Geocoding API**
   - 住所変換などに必要
   - 住所から座標への変換、座標から住所への変換

3. **Directions API**
   - 経路検索に必要
   - 出発地から納品先までの詳細な経路情報を取得

4. **Distance Matrix API**
   - 距離計算に必要
   - 複数の納品先への距離・時間を一度に計算

### 燃料代計算設定
- **有効**: 有効
- **燃費**: 1kmあたり15円
- **計算方法**: 移動距離（km）× 15円 = 燃料代
- **表示項目**: 
  - 移動距離（往路・復路・往復合計）
  - 燃費（1kmあたりの金額）
  - 燃料代（往路・復路・往復合計）

### 作業時間設定
- **荷積み時間**: 20分
- **納品作業時間**: 20分
- **荷下ろし時間**: 20分

### 納期フィルタリング設定
- **モード**: before_or_equal（本日以前、本日を含む）
- **説明**: 納期が本日の日付以前（本日を含む）の品目を抽出
- **日付フォーマット**: YYYY/MM/DD

---

## 納品先情報

### JPF
- **名称**: JPF
- **住所**: 滋賀県守山市勝部町４−７９９ ２０B棟G棟
- **建物**: 20B棟G棟
- **備考**: 受取担当者に確認

---

## 出発地情報

### あじさい園（デフォルト）
- **名称**: あじさい園
- **住所**: 滋賀県守山市石田町364番地の２
- **カテゴリ**: 出発地

---

## データ構造

### 入力データの列構造
納品データは以下の列構造を想定しています：

| 列名 | 日本語名 | 説明 |
|------|----------|------|
| Item ID | 品番 | 品物の識別番号 |
| Product Description | 品名 | 品物の名称 |
| Specifications/Details | 規格 | 品物の規格・詳細 |
| Date | 納期 | 納品期限日（YYYY/MM/DD形式） |
| Quantity | 数量 | 納品数量 |

### データ処理
- **納期列**: Date列を使用
- **数量列**: Quantity列を使用
- **日付フォーマット**: YYYY/MM/DD形式を想定

---

## 納品指示書テンプレート構造

納品指示書には以下のセクションが含まれます：

1. **基本情報**
   - 納品日
   - 出発地・納品先
   - 出発予定時刻・到着予定時刻
   - 移動距離・移動時間
   - 移動ルート

2. **納品品目一覧**
   - 本日納品対象品目（納期でフィルタリング済み）
   - 品番、品名、規格、数量、納期の一覧表

3. **納品品目サマリー**
   - 品目別数量集計
   - 総品目数・総数量
   - 納期別内訳

4. **移動ルート詳細**
   - 経路の詳細説明
   - 移動時間・距離
   - 交通状況の目安

5. **スケジュール**
   - 時刻別の予定表
   - 荷積みから納品作業、荷下ろし、職場帰還まで
   - 荷積み：出発前20分
   - 納品作業：到着後20分
   - 荷下ろし：納品作業終了後20分

6. **注意事項**
   - 荷積み作業の確認
   - 納品品目の確認
   - 納品先の確認
   - 移動時の注意
   - 納品時の確認事項
   - 荷下ろし作業の確認
   - 職場への帰還

7. **連絡先**
   - 納品先・出発地の住所情報

---

## 使用方法

### 1. 納品データの準備
納品データを以下の形式で準備します：
- CSV形式、または表形式のデータ
- 必須列：Item ID、Product Description、Specifications/Details、Date、Quantity

### 2. 納品指示書の作成
1. 本日の日付を確認
2. 納期が本日以前（本日を含む）の品目を自動抽出
3. Google Maps MCPを使用して移動時間を計算
4. 荷積み・納品作業・荷下ろしの時間を考慮してスケジュールを作成
5. 納品指示書を生成

### 3. 設定のカスタマイズ
- `default_departure_time`: デフォルト出発時刻を変更
- `loading_time_minutes`: 荷積み時間を変更（デフォルト：20分）
- `delivery_work_time_minutes`: 納品作業時間を変更（デフォルト：20分）
- `unloading_time_minutes`: 荷下ろし時間を変更（デフォルト：20分）
- `delivery_locations`: 納品先を追加・変更
- `departure_locations`: 出発地を追加・変更
- `template.sections`: セクションの追加・削除

---

## サマリー設定

### 集計方法
- **グループ化**: 品番、品名、規格でグループ化
- **合計計算**: 各グループの数量を合計
- **納期別内訳**: 納期ごとの内訳を表示

---

## 注意事項

1. **納期の判定**
   - 納期が本日の日付以前（本日を含む）の品目のみを抽出
   - 日付フォーマットはYYYY/MM/DD形式を想定

2. **移動時間の計算**
   - Google Maps MCPを使用して自動計算
   - 出発時刻を考慮して到着時刻を算出
   - 荷積み時間を考慮して出発時刻を算出
   - 納品作業時間と荷下ろし時間を考慮して職場帰還時刻を算出

3. **データの整合性**
   - 品番、品名、規格、数量、納期が正確に入力されていることを確認
   - 数量は数値形式で入力

4. **納品先の確認**
   - 納品先の建物番号や詳細を確認
   - 受取担当者に事前に連絡

---

## カスタマイズ例

### 新しい納品先を追加する場合
```json
"delivery_locations": {
  "JPF": { ... },
  "新規納品先": {
    "name": "新規納品先",
    "address": "住所",
    "category": "納品先"
  }
}
```

### 出発時刻を変更する場合
```json
"settings": {
  "default_departure_time": "14:00"
}
```

### 作業時間を変更する場合
```json
"settings": {
  "loading_time_minutes": 30,
  "delivery_work_time_minutes": 25,
  "unloading_time_minutes": 30
}
```

---

**作成日**: 2025年11月21日  
**バージョン**: 1.0

